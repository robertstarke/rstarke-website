import{s as _e,B as G,C as ne,w as ke,x as we,y as Ie,z as Ee,e as $,a as X,D as ve,c as k,b,f,g as J,E as be,p as i,q as Be,F as N,i as K,h as _,G as Ue,H as oe,k as ie,t as de,d as me,n as $e,j as Pe,I as We}from"../chunks/scheduler.oCwEqdrh.js";import{S as he,i as ge,b as Q,d as Y,m as Z,a as D,t as x,e as ee,c as Le,g as Fe}from"../chunks/index.BKcCV9hI.js";import{g as Ge}from"../chunks/entry.PQaiNRPu.js";import{I as ye,g as De,a as xe,F as He}from"../chunks/FormattedTime.Dli5RA2G.js";function Re(n){let e;const l=n[2].default,t=ke(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){x(t,r),e=!1},d(r){t&&t.d(r)}}}function Xe(n){let e,l;const t=[{name:"pause"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Re]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=G(r,t[s]);return e=new ye({props:r}),{c(){Q(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,a){Z(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){x(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Je(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return n.$$set=a=>{l(1,e=G(G({},e),ne(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class Ke extends he{constructor(e){super(),ge(this,e,Je,Xe,_e,{})}}function Qe(n){let e;const l=n[2].default,t=ke(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){x(t,r),e=!1},d(r){t&&t.d(r)}}}function Ye(n){let e,l;const t=[{name:"play"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Qe]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=G(r,t[s]);return e=new ye({props:r}),{c(){Q(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,a){Z(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){x(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Ze(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return n.$$set=a=>{l(1,e=G(G({},e),ne(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class et extends he{constructor(e){super(),ge(this,e,Ze,Ye,_e,{})}}function tt(n){let e;const l=n[2].default,t=ke(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){x(t,r),e=!1},d(r){t&&t.d(r)}}}function st(n){let e,l;const t=[{name:"x"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[tt]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=G(r,t[s]);return e=new ye({props:r}),{c(){Q(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,a){Z(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){x(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function rt(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return n.$$set=a=>{l(1,e=G(G({},e),ne(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class lt extends he{constructor(e){super(),ge(this,e,rt,st,_e,{})}}function nt(n){let e,l;return e=new Ke({props:{size:"40"}}),{c(){Q(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){x(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function at(n){let e,l;return e=new et({props:{size:"40"}}),{c(){Q(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){x(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function ot(n){let e;return{c(){e=de("Congratulations you finished the excercise")},l(l){e=me(l,"Congratulations you finished the excercise")},m(l,t){K(l,e,t)},p:$e,i:$e,o:$e,d(l){l&&f(e)}}}function it(n){let e,l,t,r;function s(o,d){return o[1]==="rest"?ut:ct}let a=s(n),c=a(n);return t=new He({props:{timeInMs:n[0]}}),{c(){c.c(),e=X(),l=$("div"),Q(t.$$.fragment)},l(o){c.l(o),e=J(o),l=k(o,"DIV",{});var d=b(l);Y(t.$$.fragment,d),d.forEach(f)},m(o,d){c.m(o,d),K(o,e,d),K(o,l,d),Z(t,l,null),r=!0},p(o,d){a===(a=s(o))&&c?c.p(o,d):(c.d(1),c=a(o),c&&(c.c(),c.m(e.parentNode,e)));const q={};d&1&&(q.timeInMs=o[0]),t.$set(q)},i(o){r||(D(t.$$.fragment,o),r=!0)},o(o){x(t.$$.fragment,o),r=!1},d(o){o&&(f(e),f(l)),c.d(o),ee(t)}}}function ct(n){let e,l=n[5].name+"",t;return{c(){e=$("div"),t=de(l),this.h()},l(r){e=k(r,"DIV",{class:!0});var s=b(e);t=me(s,l),s.forEach(f),this.h()},h(){i(e,"class","mb-6")},m(r,s){K(r,e,s),_(e,t)},p(r,s){s&32&&l!==(l=r[5].name+"")&&Pe(t,l)},d(r){r&&f(e)}}}function ut(n){let e,l="Rest",t,r,s,a=n[5].name+"",c;return{c(){e=$("div"),e.textContent=l,t=X(),r=$("div"),s=de("Next: "),c=de(a),this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-171wd9d"&&(e.textContent=l),t=J(o),r=k(o,"DIV",{class:!0});var d=b(r);s=me(d,"Next: "),c=me(d,a),d.forEach(f),this.h()},h(){i(e,"class","mb-2"),i(r,"class","mb-6 text-2xl")},m(o,d){K(o,e,d),K(o,t,d),K(o,r,d),_(r,s),_(r,c)},p(o,d){d&32&&a!==(a=o[5].name+"")&&Pe(c,a)},d(o){o&&(f(e),f(t),f(r))}}}function ft(n){let e,l,t,r,s,a,c,o,d,q,B,re,S,T,p,g,F,U,M,L,I,z,v,te,P,O,W,V,E,se,w,y,m,C;o=new lt({props:{size:"40"}}),B=new He({props:{timeInMs:n[2]}});const A=[at,nt],j=[];function ze(u,h){return u[3]?0:1}p=ze(n),g=j[p]=A[p](n);const Ve=[it,ot],R=[];function Ce(u,h){return u[2]>0?0:1}return V=Ce(n),E=R[V]=Ve[V](n),{c(){e=$("div"),l=$("div"),t=$("div"),r=X(),s=$("div"),a=$("a"),c=$("button"),Q(o.$$.fragment),d=X(),q=$("div"),Q(B.$$.fragment),re=X(),S=$("div"),T=$("button"),g.c(),U=X(),M=$("div"),L=$("div"),I=ve("svg"),z=ve("circle"),v=ve("circle"),te=X(),P=$("div"),O=$("div"),W=$("div"),E.c(),se=X(),w=$("div"),this.h()},l(u){e=k(u,"DIV",{class:!0});var h=b(e);l=k(h,"DIV",{class:!0});var ae=b(l);t=k(ae,"DIV",{class:!0,style:!0}),b(t).forEach(f),ae.forEach(f),r=J(h),s=k(h,"DIV",{class:!0});var H=b(s);a=k(H,"A",{href:!0,title:!0,class:!0});var le=b(a);c=k(le,"BUTTON",{class:!0});var Ne=b(c);Y(o.$$.fragment,Ne),Ne.forEach(f),le.forEach(f),d=J(H),q=k(H,"DIV",{class:!0});var Te=b(q);Y(B.$$.fragment,Te),Te.forEach(f),re=J(H),S=k(H,"DIV",{class:!0});var Oe=b(S);T=k(Oe,"BUTTON",{class:!0});var je=b(T);g.l(je),je.forEach(f),Oe.forEach(f),H.forEach(f),U=J(h),M=k(h,"DIV",{class:!0});var qe=b(M);L=k(qe,"DIV",{class:!0});var ue=b(L);I=be(ue,"svg",{class:!0,width:!0,height:!0,viewBox:!0,xmlns:!0});var pe=b(I);z=be(pe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0}),b(z).forEach(f),v=be(pe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),b(v).forEach(f),pe.forEach(f),te=J(ue),P=k(ue,"DIV",{class:!0});var fe=b(P);O=k(fe,"DIV",{class:!0});var Me=b(O);W=k(Me,"DIV",{class:!0});var Ae=b(W);E.l(Ae),Ae.forEach(f),Me.forEach(f),se=J(fe),w=k(fe,"DIV",{class:!0}),b(w).forEach(f),fe.forEach(f),ue.forEach(f),qe.forEach(f),h.forEach(f),this.h()},h(){i(t,"class","h-full bg-rose-500 transition-all duration-1000 ease-linear"),Be(t,"width",n[4]+"%"),i(l,"class","progressBar w-full h-6 bg-stone-400"),i(c,"class","aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 text-3xl hover:bg-rose-600 hover:text-zinc-900"),i(a,"href","./"),i(a,"title","Back to setup"),i(a,"class","flex-none"),i(q,"class","w-full text-3xl text-center"),T.disabled=F=n[2]<0,i(T,"class","aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 hover:bg-rose-600 hover:text-zinc-900 disabled:bg-stone-400 disabled:hover:text-zinc-800"),i(S,"class","flex-none"),i(s,"class","h-32 flex flex-row justify-between items-center p-8"),i(z,"id","wa-track"),i(z,"cx",n[11]),i(z,"cy",n[11]),i(z,"r",n[12]),i(z,"fill","none"),i(z,"class","stroke-current text-stone-400 fill-transparent"),i(z,"stroke-width",Se),i(v,"id","wa-indicator"),i(v,"cx",n[11]),i(v,"cy",n[11]),i(v,"r",n[12]),i(v,"fill","none"),i(v,"class","stroke-current fill-transparent"),i(v,"stroke-width",dt),i(v,"stroke-linecap","round"),i(v,"stroke-dasharray",n[13]),i(v,"stroke-dashoffset",n[14]),N(v,"text-rose-500",n[1]==="rest"),N(v,"text-lime-500",n[1]==="exercise"),i(I,"class","z-30 w-auto h-full -rotate-90"),i(I,"width",ce),i(I,"height",ce),i(I,"viewBox",`0 0 ${ce} ${ce}`),i(I,"xmlns","http://www.w3.org/2000/svg"),i(W,"class","text-3xl text-center"),i(O,"class","z-20 flex justify-center items-center aspect-square h-full rounded-full overflow-hidden"),N(O,"bg-rose-300",n[1]==="rest"),N(O,"bg-lime-300",n[1]==="exercise"),i(w,"class","z-10 absolute aspect-square h-full rounded-full svelte-tlkz4g"),N(w,"wa-animate-ping",n[0]<4e3),N(w,"bg-rose-500",n[1]==="rest"),N(w,"bg-lime-500",n[1]==="exercise"),i(P,"class","absolute flex justify-center items-center aspect-square h-4/5 top-1/2 start-1/2 transform -translate-y-1/2 -translate-x-1/2 rounded-full"),i(L,"class","relative h-full flex justify-center items-stretch"),i(M,"class","custom-height svelte-tlkz4g"),i(e,"class","w-lvh")},m(u,h){K(u,e,h),_(e,l),_(l,t),_(e,r),_(e,s),_(s,a),_(a,c),Z(o,c,null),_(s,d),_(s,q),Z(B,q,null),_(s,re),_(s,S),_(S,T),j[p].m(T,null),_(e,U),_(e,M),_(M,L),_(L,I),_(I,z),_(I,v),_(L,te),_(L,P),_(P,O),_(O,W),R[V].m(W,null),_(P,se),_(P,w),y=!0,m||(C=Ue(T,"click",n[15]),m=!0)},p(u,[h]){(!y||h&16)&&Be(t,"width",u[4]+"%");const ae={};h&4&&(ae.timeInMs=u[2]),B.$set(ae);let H=p;p=ze(u),p!==H&&(Fe(),x(j[H],1,1,()=>{j[H]=null}),Le(),g=j[p],g||(g=j[p]=A[p](u),g.c()),D(g,1),g.m(T,null)),(!y||h&4&&F!==(F=u[2]<0))&&(T.disabled=F),(!y||h&2)&&N(v,"text-rose-500",u[1]==="rest"),(!y||h&2)&&N(v,"text-lime-500",u[1]==="exercise");let le=V;V=Ce(u),V===le?R[V].p(u,h):(Fe(),x(R[le],1,1,()=>{R[le]=null}),Le(),E=R[V],E?E.p(u,h):(E=R[V]=Ve[V](u),E.c()),D(E,1),E.m(W,null)),(!y||h&2)&&N(O,"bg-rose-300",u[1]==="rest"),(!y||h&2)&&N(O,"bg-lime-300",u[1]==="exercise"),(!y||h&1)&&N(w,"wa-animate-ping",u[0]<4e3),(!y||h&2)&&N(w,"bg-rose-500",u[1]==="rest"),(!y||h&2)&&N(w,"bg-lime-500",u[1]==="exercise")},i(u){y||(D(o.$$.fragment,u),D(B.$$.fragment,u),D(g),D(E),y=!0)},o(u){x(o.$$.fragment,u),x(B.$$.fragment,u),x(g),x(E),y=!1},d(u){u&&f(e),ee(o),ee(B),j[p].d(),R[V].d(),m=!1,C()}}}const ce=128,Se=6,dt=3;function mt(n,e,l){let t,r,s,a,c,o,d;const q=oe("selectedExercises");ie(n,q,m=>l(23,d=m));const B=oe("exerciseLength");ie(n,B,m=>l(20,a=m));const re=oe("restLength");ie(n,re,m=>l(19,s=m));const S=oe("repetitions");ie(n,S,m=>l(22,o=m));const T=oe("setOrCycle");ie(n,T,m=>l(21,c=m));let p=d;if(o>1){const m=Array(o).fill("");c==="set"?p=p.flatMap(C=>m.map(()=>C)):c==="cycle"&&(p=m.flatMap(()=>[...p]))}let g=s,F=!1,U="rest",M=0;const L=(a+s)*p.length;let I=L;const z=ce/2,v=z-Se,te=2*Math.PI*v;let P=te;const O=[{strokeDashoffset:te},{strokeDashoffset:0}],W={id:"restA",duration:s},V={id:"exerciseA",duration:a},E=m=>{{const C=new AudioContext,A=C.createOscillator();A.frequency.value=m?540:1240;const j=m?.75:.2;A.connect(C.destination),A.start(),A.stop(C.currentTime+j)}},se=()=>{if(F){clearInterval(w);return}if(g<=3e3&&g%1e3===0&&(g<1e3?E(!0):E(!1)),g<=0)if(clearInterval(w),M<p.length)U==="rest"?(l(1,U="exercise"),l(0,g=a)):(l(1,U="rest"),l(0,g=s),l(17,M++,M)),w=setInterval(se,100);else return;l(0,g=g-100),l(2,I=I-100)};let w=setInterval(se,100);p.length===0&&Ge("./");const y=()=>{F?w=setInterval(se,100):clearInterval(w),l(3,F=!F)};return n.$$.update=()=>{if(n.$$.dirty&3){const m=document.getElementById("wa-indicator");let C=m==null?void 0:m.animate(O,W),A=m==null?void 0:m.animate(O,V);C==null||C.cancel(),A==null||A.cancel();let j=C;j=U==="rest"?C:A,j&&(j.currentTime=g)}n.$$.dirty&196608&&l(5,t=p[M]),n.$$.dirty&4&&l(4,r=(I-1e3)/L*100)},[g,U,I,F,r,t,q,B,re,S,T,z,v,te,P,y,p,M]}class vt extends he{constructor(e){super(),ge(this,e,mt,ft,_e,{})}}export{vt as component};

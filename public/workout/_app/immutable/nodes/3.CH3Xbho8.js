import{s as ge,B as W,C as le,w as $e,x as we,y as Ie,z as Ee,e as D,a as Z,D as ie,c as x,b as k,f as u,g as ee,E as ce,p as o,q as Me,F as E,i as R,h as _,G as je,H as Se,I as fe,k as ue,t as he,d as pe,n as ke,j as Fe,J as Ue}from"../chunks/scheduler.D4vLoUHo.js";import{S as ve,i as be,b as X,d as K,m as Q,a as V,t as C,e as Y,c as qe,g as Ae}from"../chunks/index.edZ_8fl8.js";import{g as Pe}from"../chunks/entry.CkzeOaUS.js";import{I as ye,g as De,a as xe,F as Ge}from"../chunks/FormattedTime.qqx-7wSw.js";function We(n){let e;const l=n[2].default,t=$e(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(V(t,r),e=!0)},o(r){C(t,r),e=!1},d(r){t&&t.d(r)}}}function He(n){let e,l;const t=[{name:"pause"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[We]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=W(r,t[s]);return e=new ye({props:r}),{c(){X(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,a){Q(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(V(e.$$.fragment,s),l=!0)},o(s){C(e.$$.fragment,s),l=!1},d(s){Y(e,s)}}}function Re(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return n.$$set=a=>{l(1,e=W(W({},e),le(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=le(e),[s,e,t,r]}class Xe extends ve{constructor(e){super(),be(this,e,Re,He,ge,{})}}function Ke(n){let e;const l=n[2].default,t=$e(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(V(t,r),e=!0)},o(r){C(t,r),e=!1},d(r){t&&t.d(r)}}}function Qe(n){let e,l;const t=[{name:"play"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Ke]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=W(r,t[s]);return e=new ye({props:r}),{c(){X(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,a){Q(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(V(e.$$.fragment,s),l=!0)},o(s){C(e.$$.fragment,s),l=!1},d(s){Y(e,s)}}}function Ye(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return n.$$set=a=>{l(1,e=W(W({},e),le(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=le(e),[s,e,t,r]}class Ze extends ve{constructor(e){super(),be(this,e,Ye,Qe,ge,{})}}function et(n){let e;const l=n[2].default,t=$e(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&we(t,l,r,r[3],e?Ee(l,r[3],s,null):Ie(r[3]),null)},i(r){e||(V(t,r),e=!0)},o(r){C(t,r),e=!1},d(r){t&&t.d(r)}}}function tt(n){let e,l;const t=[{name:"x"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[et]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=W(r,t[s]);return e=new ye({props:r}),{c(){X(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,a){Q(e,s,a),l=!0},p(s,[a]){const c=a&3?De(t,[t[0],a&2&&xe(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){l||(V(e.$$.fragment,s),l=!0)},o(s){C(e.$$.fragment,s),l=!1},d(s){Y(e,s)}}}function st(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return n.$$set=a=>{l(1,e=W(W({},e),le(a))),"$$scope"in a&&l(3,r=a.$$scope)},e=le(e),[s,e,t,r]}class rt extends ve{constructor(e){super(),be(this,e,st,tt,ge,{})}}function lt(n){let e,l;return e=new Xe({props:{size:"40"}}),{c(){X(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,r){Q(e,t,r),l=!0},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function nt(n){let e,l;return e=new Ze({props:{size:"40"}}),{c(){X(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,r){Q(e,t,r),l=!0},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function at(n){let e;return{c(){e=he("Done! Good Job!")},l(l){e=pe(l,"Done! Good Job!")},m(l,t){R(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&u(e)}}}function ot(n){let e,l,t,r;function s(i,d){return i[1]==="rest"?ct:it}let a=s(n),c=a(n);return t=new Ge({props:{timeInMs:n[0]}}),{c(){c.c(),e=Z(),l=D("div"),X(t.$$.fragment)},l(i){c.l(i),e=ee(i),l=x(i,"DIV",{});var d=k(l);K(t.$$.fragment,d),d.forEach(u)},m(i,d){c.m(i,d),R(i,e,d),R(i,l,d),Q(t,l,null),r=!0},p(i,d){a===(a=s(i))&&c?c.p(i,d):(c.d(1),c=a(i),c&&(c.c(),c.m(e.parentNode,e)));const L={};d&1&&(L.timeInMs=i[0]),t.$set(L)},i(i){r||(V(t.$$.fragment,i),r=!0)},o(i){C(t.$$.fragment,i),r=!1},d(i){i&&(u(e),u(l)),c.d(i),Y(t)}}}function it(n){let e,l=n[5].name+"",t;return{c(){e=D("div"),t=he(l),this.h()},l(r){e=x(r,"DIV",{class:!0});var s=k(e);t=pe(s,l),s.forEach(u),this.h()},h(){o(e,"class","mb-6")},m(r,s){R(r,e,s),_(e,t)},p(r,s){s&32&&l!==(l=r[5].name+"")&&Fe(t,l)},d(r){r&&u(e)}}}function ct(n){let e,l="Rest",t,r,s,a=n[5].name+"",c;return{c(){e=D("div"),e.textContent=l,t=Z(),r=D("div"),s=he("Next: "),c=he(a),this.h()},l(i){e=x(i,"DIV",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-171wd9d"&&(e.textContent=l),t=ee(i),r=x(i,"DIV",{class:!0});var d=k(r);s=pe(d,"Next: "),c=pe(d,a),d.forEach(u),this.h()},h(){o(e,"class","mb-2"),o(r,"class","mb-6 text-2xl")},m(i,d){R(i,e,d),R(i,t,d),R(i,r,d),_(r,s),_(r,c)},p(i,d){d&32&&a!==(a=i[5].name+"")&&Fe(c,a)},d(i){i&&(u(e),u(t),u(r))}}}function ft(n){let e,l,t,r,s,a,c,i,d,L,j,te,S,T,v,p,F,q,O,M,w,I,b,$,B,se,H,U,z,N,g,ne,me;i=new rt({props:{size:"40"}}),j=new Ge({props:{timeInMs:n[2]}});const h=[nt,lt],y=[];function A(f,m){return f[3]?0:1}v=A(n),p=y[v]=h[v](n);const P=[ot,at],G=[];function ze(f,m){return f[2]>0?0:1}return z=ze(n),N=G[z]=P[z](n),{c(){e=D("div"),l=D("div"),t=D("div"),r=Z(),s=D("div"),a=D("a"),c=D("button"),X(i.$$.fragment),d=Z(),L=D("div"),X(j.$$.fragment),te=Z(),S=D("div"),T=D("button"),p.c(),q=Z(),O=D("div"),M=D("div"),w=ie("svg"),I=ie("circle"),b=ie("circle"),$=ie("circle"),B=ie("circle"),se=Z(),H=D("div"),U=D("div"),N.c(),this.h()},l(f){e=x(f,"DIV",{class:!0});var m=k(e);l=x(m,"DIV",{class:!0});var ae=k(l);t=x(ae,"DIV",{class:!0,style:!0}),k(t).forEach(u),ae.forEach(u),r=ee(m),s=x(m,"DIV",{class:!0});var J=k(s);a=x(J,"A",{href:!0,title:!0,class:!0});var re=k(a);c=x(re,"BUTTON",{class:!0});var Ne=k(c);K(i.$$.fragment,Ne),Ne.forEach(u),re.forEach(u),d=ee(J),L=x(J,"DIV",{class:!0});var Ve=k(L);K(j.$$.fragment,Ve),Ve.forEach(u),te=ee(J),S=x(J,"DIV",{class:!0});var Ce=k(S);T=x(Ce,"BUTTON",{class:!0});var Be=k(T);p.l(Be),Be.forEach(u),Ce.forEach(u),J.forEach(u),q=ee(m),O=x(m,"DIV",{class:!0});var Te=k(O);M=x(Te,"DIV",{class:!0});var _e=k(M);w=ce(_e,"svg",{class:!0,width:!0,height:!0,viewBox:!0,xmlns:!0});var oe=k(w);I=ce(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0}),k(I).forEach(u),b=ce(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),k(b).forEach(u),$=ce(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,class:!0}),k($).forEach(u),B=ce(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0}),k(B).forEach(u),oe.forEach(u),se=ee(_e),H=x(_e,"DIV",{class:!0});var Le=k(H);U=x(Le,"DIV",{class:!0});var Oe=k(U);N.l(Oe),Oe.forEach(u),Le.forEach(u),_e.forEach(u),Te.forEach(u),m.forEach(u),this.h()},h(){o(t,"class","h-full bg-rose-500 transition-all duration-1000 ease-linear"),Me(t,"width",n[4]+"%"),o(l,"class","progressBar w-full h-6"),o(c,"class","flex-none aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 text-3xl hover:bg-rose-600 hover:text-zinc-900"),o(a,"href","./"),o(a,"title","Back to setup"),o(a,"class","flex-none"),o(L,"class","w-full text-3xl text-rose-500 text-center"),T.disabled=F=n[2]<0,o(T,"class","aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 hover:bg-rose-600 hover:text-zinc-900 disabled:bg-stone-400 disabled:hover:text-zinc-800"),o(S,"class","flex-none"),o(s,"class","h-32 flex flex-row justify-between items-center p-8"),o(I,"id","wa-track"),o(I,"cx",n[11]),o(I,"cy",n[11]),o(I,"r",n[12]),o(I,"fill","none"),o(I,"class","stroke-current fill-transparent"),o(I,"stroke-width",ut),E(I,"text-lime-500",n[1]==="rest"),E(I,"text-rose-500",n[1]==="exercise"),o(b,"id","wa-indicator"),o(b,"cx",n[11]),o(b,"cy",n[11]),o(b,"r",n[12]),o(b,"fill","none"),o(b,"class","stroke-current fill-transparent"),o(b,"stroke-width",Je),o(b,"stroke-linecap","round"),o(b,"stroke-dasharray",n[13]),o(b,"stroke-dashoffset",n[14]),E(b,"text-rose-500",n[1]==="rest"),E(b,"text-lime-500",n[1]==="exercise"),o($,"id","wa-inner-ping"),o($,"cx",n[11]),o($,"cy",n[11]),o($,"r",n[12]-8),o($,"class","transform origin-center svelte-tlkz4g"),E($,"fill-rose-500",n[1]==="rest"),E($,"fill-lime-500",n[1]==="exercise"),E($,"wa-animate-ping",n[0]<=3e3),o(B,"id","wa-inner"),o(B,"cx",n[11]),o(B,"cy",n[11]),o(B,"r",n[12]-8),E(B,"fill-rose-300",n[1]==="rest"),E(B,"fill-lime-300",n[1]==="exercise"),o(w,"class","z-30 w-auto h-full -rotate-90"),o(w,"width",de),o(w,"height",de),o(w,"viewBox",`0 0 ${de} ${de}`),o(w,"xmlns","http://www.w3.org/2000/svg"),o(U,"class","text-3xl text-center"),o(H,"class","z-40 absolute flex justify-center items-center aspect-square top-1/2 start-1/2 transform -translate-y-1/2 -translate-x-1/2 rounded-full"),o(M,"class","relative h-full flex justify-center items-stretch"),o(O,"class","custom-height svelte-tlkz4g"),o(e,"class","min-w-96 w-lvw bg-zinc-800")},m(f,m){R(f,e,m),_(e,l),_(l,t),_(e,r),_(e,s),_(s,a),_(a,c),Q(i,c,null),_(s,d),_(s,L),Q(j,L,null),_(s,te),_(s,S),_(S,T),y[v].m(T,null),_(e,q),_(e,O),_(O,M),_(M,w),_(w,I),_(w,b),_(w,$),_(w,B),_(M,se),_(M,H),_(H,U),G[z].m(U,null),g=!0,ne||(me=[je(c,"click",n[15]),je(T,"click",n[16])],ne=!0)},p(f,[m]){(!g||m&16)&&Me(t,"width",f[4]+"%");const ae={};m&4&&(ae.timeInMs=f[2]),j.$set(ae);let J=v;v=A(f),v!==J&&(Ae(),C(y[J],1,1,()=>{y[J]=null}),qe(),p=y[v],p||(p=y[v]=h[v](f),p.c()),V(p,1),p.m(T,null)),(!g||m&4&&F!==(F=f[2]<0))&&(T.disabled=F),(!g||m&2)&&E(I,"text-lime-500",f[1]==="rest"),(!g||m&2)&&E(I,"text-rose-500",f[1]==="exercise"),(!g||m&2)&&E(b,"text-rose-500",f[1]==="rest"),(!g||m&2)&&E(b,"text-lime-500",f[1]==="exercise"),(!g||m&2)&&E($,"fill-rose-500",f[1]==="rest"),(!g||m&2)&&E($,"fill-lime-500",f[1]==="exercise"),(!g||m&1)&&E($,"wa-animate-ping",f[0]<=3e3),(!g||m&2)&&E(B,"fill-rose-300",f[1]==="rest"),(!g||m&2)&&E(B,"fill-lime-300",f[1]==="exercise");let re=z;z=ze(f),z===re?G[z].p(f,m):(Ae(),C(G[re],1,1,()=>{G[re]=null}),qe(),N=G[z],N?N.p(f,m):(N=G[z]=P[z](f),N.c()),V(N,1),N.m(U,null))},i(f){g||(V(i.$$.fragment,f),V(j.$$.fragment,f),V(p),V(N),g=!0)},o(f){C(i.$$.fragment,f),C(j.$$.fragment,f),C(p),C(N),g=!1},d(f){f&&u(e),Y(i),Y(j),y[v].d(),G[z].d(),ne=!1,Se(me)}}}const de=128,ut=3,Je=3;function dt(n,e,l){let t,r,s,a,c,i,d;const L=fe("selectedExercises");ue(n,L,h=>l(24,d=h));const j=fe("exerciseLength");ue(n,j,h=>l(20,s=h));const te=fe("restLength");ue(n,te,h=>l(21,a=h));const S=fe("repetitions");ue(n,S,h=>l(23,i=h));const T=fe("setOrCycle");ue(n,T,h=>l(22,c=h));let v=d||[];if(i>1){const h=Array(i).fill("");c==="set"?v=v.flatMap(y=>h.map(()=>y)):c==="cycle"&&(v=h.flatMap(()=>[...v]))}let p=a,F=!1,q="rest",O=0;const M=(s+a)*v.length;let w=M;const I=de/2,b=I-Je,$=2*Math.PI*b;let B=$;const se=[{strokeDashoffset:$},{strokeDashoffset:0}],H={id:"restA",duration:a},U={id:"exerciseA",duration:s},z=(h=1240,y=.2)=>{{const A=new AudioContext,P=A.createOscillator();P.frequency.value=h,P.connect(A.destination),P.start(),P.stop(A.currentTime+y)}},N=()=>{if(F||!t){clearInterval(g);return}if(p<=0){if(clearInterval(g),q==="exercise"&&O===v.length-1)return;q==="rest"?(l(1,q="exercise"),l(0,p=s)):(l(1,q="rest"),l(0,p=a),l(18,O++,O)),g=setInterval(N,100)}p<=3e3&&p%1e3===0&&(p<1e3?z(540,.75):z()),q==="exercise"&&t&&t.switchSides===!0&&p===s/2&&z(850,.5),l(0,p=p-100),l(2,w=w-100)};let g=setInterval(N,100);v.length===0&&(clearInterval(g),Pe("./"));const ne=()=>{clearInterval(g),Pe("./")},me=()=>{F?g=setInterval(N,100):clearInterval(g),l(3,F=!F)};return n.$$.update=()=>{if(n.$$.dirty&3){navigator.wakeLock!==void 0&&navigator.wakeLock.request("screen").then(G=>{setTimeout(()=>G.release(),M)});const h=document.getElementById("wa-indicator");let y=h==null?void 0:h.animate(se,H),A=h==null?void 0:h.animate(se,U);y==null||y.cancel(),A==null||A.cancel();let P=y;P=q==="rest"?y:A,P&&(P.currentTime=p)}n.$$.dirty&393216&&l(5,t=v[O||0]),n.$$.dirty&4&&l(4,r=(w-1e3)/M*100)},[p,q,w,F,r,t,L,j,te,S,T,I,b,$,B,ne,me,v,O]}class gt extends ve{constructor(e){super(),be(this,e,dt,ft,ge,{})}}export{gt as component};

import{s as be,B as R,C as ne,w as we,x as Ie,y as Ee,z as ye,e as b,a as X,D as ce,c as x,b as g,f as u,g as K,E as fe,p as i,q as Pe,F as w,i as Q,h as d,G as Fe,H as We,I as ue,k as de,J as Se,n as He,t as ve,d as $e,j as De}from"../chunks/scheduler.D4vLoUHo.js";import{S as xe,i as ke,b as Y,d as Z,m as ee,a as N,t as B,e as te,c as Re,g as Xe}from"../chunks/index.edZ_8fl8.js";import{g as Ge}from"../chunks/entry.Dc0qK8jq.js";import{I as Ve,g as ze,a as Ce,F as Je}from"../chunks/FormattedTime.qqx-7wSw.js";function Ke(l){let e;const n=l[2].default,t=we(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ie(t,n,r,r[3],e?ye(n,r[3],s,null):Ee(r[3]),null)},i(r){e||(N(t,r),e=!0)},o(r){B(t,r),e=!1},d(r){t&&t.d(r)}}}function Qe(l){let e,n;const t=[{name:"pause"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[Ke]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=R(r,t[s]);return e=new Ve({props:r}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){ee(e,s,a),n=!0},p(s,[a]){const c=a&3?ze(t,[t[0],a&2&&Ce(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(N(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function Ye(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return l.$$set=a=>{n(1,e=R(R({},e),ne(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class Ze extends xe{constructor(e){super(),ke(this,e,Ye,Qe,be,{})}}function et(l){let e;const n=l[2].default,t=we(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ie(t,n,r,r[3],e?ye(n,r[3],s,null):Ee(r[3]),null)},i(r){e||(N(t,r),e=!0)},o(r){B(t,r),e=!1},d(r){t&&t.d(r)}}}function tt(l){let e,n;const t=[{name:"play"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[et]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=R(r,t[s]);return e=new Ve({props:r}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){ee(e,s,a),n=!0},p(s,[a]){const c=a&3?ze(t,[t[0],a&2&&Ce(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(N(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function st(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return l.$$set=a=>{n(1,e=R(R({},e),ne(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class rt extends xe{constructor(e){super(),ke(this,e,st,tt,be,{})}}function lt(l){let e;const n=l[2].default,t=we(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ie(t,n,r,r[3],e?ye(n,r[3],s,null):Ee(r[3]),null)},i(r){e||(N(t,r),e=!0)},o(r){B(t,r),e=!1},d(r){t&&t.d(r)}}}function nt(l){let e,n;const t=[{name:"x"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[lt]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=R(r,t[s]);return e=new Ve({props:r}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){ee(e,s,a),n=!0},p(s,[a]){const c=a&3?ze(t,[t[0],a&2&&Ce(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(N(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function at(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return l.$$set=a=>{n(1,e=R(R({},e),ne(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=ne(e),[s,e,t,r]}class it extends xe{constructor(e){super(),ke(this,e,at,nt,be,{})}}function ot(l){let e,n;return e=new Ze({props:{size:"40"}}),{c(){Y(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){ee(e,t,r),n=!0},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function ct(l){let e,n;return e=new rt({props:{size:"40"}}),{c(){Y(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){ee(e,t,r),n=!0},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function ft(l){let e,n="Done! Good Job!";return{c(){e=b("div"),e.textContent=n,this.h()},l(t){e=x(t,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1i33vmi"&&(e.textContent=n),this.h()},h(){i(e,"class","text-lime-500")},m(t,r){Q(t,e,r)},p:He,d(t){t&&u(e)}}}function ut(l){let e,n,t=l[5].description+"",r;function s(o,m){return o[1]==="rest"?mt:dt}let a=s(l),c=a(l);return{c(){c.c(),e=X(),n=b("div"),r=ve(t),this.h()},l(o){c.l(o),e=K(o),n=x(o,"DIV",{class:!0});var m=g(n);r=$e(m,t),m.forEach(u),this.h()},h(){i(n,"class","sm:text-lg xl:text-2xl text-stone-50")},m(o,m){c.m(o,m),Q(o,e,m),Q(o,n,m),d(n,r)},p(o,m){a===(a=s(o))&&c?c.p(o,m):(c.d(1),c=a(o),c&&(c.c(),c.m(e.parentNode,e))),m&32&&t!==(t=o[5].description+"")&&De(r,t)},d(o){o&&(u(e),u(n)),c.d(o)}}}function dt(l){let e,n=l[5].name+"",t;return{c(){e=b("div"),t=ve(n),this.h()},l(r){e=x(r,"DIV",{class:!0});var s=g(e);t=$e(s,n),s.forEach(u),this.h()},h(){i(e,"class","text-lime-500")},m(r,s){Q(r,e,s),d(e,t)},p(r,s){s&32&&n!==(n=r[5].name+"")&&De(t,n)},d(r){r&&u(e)}}}function mt(l){let e,n="Rest",t,r,s,a=l[5].name+"",c;return{c(){e=b("div"),e.textContent=n,t=X(),r=b("div"),s=ve("Next: "),c=ve(a),this.h()},l(o){e=x(o,"DIV",{"data-svelte-h":!0}),Se(e)!=="svelte-lcrvs2"&&(e.textContent=n),t=K(o),r=x(o,"DIV",{class:!0});var m=g(r);s=$e(m,"Next: "),c=$e(m,a),m.forEach(u),this.h()},h(){i(r,"class","sm:text-3xl xl:text-4xl")},m(o,m){Q(o,e,m),Q(o,t,m),Q(o,r,m),d(r,s),d(r,c)},p(o,m){m&32&&a!==(a=o[5].name+"")&&De(c,a)},d(o){o&&(u(e),u(t),u(r))}}}function ht(l){let e,n,t,r,s,a,c,o,m,W,L,re,H,C,v,p,F,O,z,G,T,le,M,I,E,$,y,q,se,J,k,S,D,h,j;o=new it({props:{size:"40"}}),L=new Je({props:{timeInMs:l[2]}});const A=[ct,ot],V=[];function he(f,_){return f[3]?0:1}v=he(l),p=V[v]=A[v](l);function Ne(f,_){return f[2]>0?ut:ft}let _e=Ne(l),P=_e(l);return S=new Je({props:{timeInMs:l[0]}}),{c(){e=b("div"),n=b("div"),t=b("div"),r=X(),s=b("div"),a=b("a"),c=b("button"),Y(o.$$.fragment),m=X(),W=b("div"),Y(L.$$.fragment),re=X(),H=b("div"),C=b("button"),p.c(),O=X(),z=b("div"),G=b("div"),T=b("div"),P.c(),le=X(),M=b("div"),I=ce("svg"),E=ce("circle"),$=ce("circle"),y=ce("circle"),q=ce("circle"),se=X(),J=b("div"),k=b("div"),Y(S.$$.fragment),this.h()},l(f){e=x(f,"DIV",{class:!0});var _=g(e);n=x(_,"DIV",{class:!0});var ae=g(n);t=x(ae,"DIV",{class:!0,style:!0}),g(t).forEach(u),ae.forEach(u),r=K(_),s=x(_,"DIV",{class:!0});var U=g(s);a=x(U,"A",{href:!0,title:!0,class:!0});var ie=g(a);c=x(ie,"BUTTON",{class:!0});var Be=g(c);Z(o.$$.fragment,Be),Be.forEach(u),ie.forEach(u),m=K(U),W=x(U,"DIV",{class:!0});var Te=g(W);Z(L.$$.fragment,Te),Te.forEach(u),re=K(U),H=x(U,"DIV",{class:!0});var je=g(H);C=x(je,"BUTTON",{class:!0});var Le=g(C);p.l(Le),Le.forEach(u),je.forEach(u),U.forEach(u),O=K(_),z=x(_,"DIV",{class:!0});var pe=g(z);G=x(pe,"DIV",{class:!0});var Oe=g(G);T=x(Oe,"DIV",{class:!0});var Me=g(T);P.l(Me),Me.forEach(u),Oe.forEach(u),le=K(pe),M=x(pe,"DIV",{class:!0});var ge=g(M);I=fe(ge,"svg",{class:!0,width:!0,height:!0,viewBox:!0,xmlns:!0});var oe=g(I);E=fe(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0}),g(E).forEach(u),$=fe(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),g($).forEach(u),y=fe(oe,"circle",{id:!0,cx:!0,cy:!0,r:!0,class:!0}),g(y).forEach(u),q=fe(oe,"circle",{id:!0,class:!0,cx:!0,cy:!0,r:!0}),g(q).forEach(u),oe.forEach(u),se=K(ge),J=x(ge,"DIV",{class:!0});var qe=g(J);k=x(qe,"DIV",{class:!0});var Ae=g(k);Z(S.$$.fragment,Ae),Ae.forEach(u),qe.forEach(u),ge.forEach(u),pe.forEach(u),_.forEach(u),this.h()},h(){i(t,"class","h-full bg-rose-500 transition-all duration-1000 ease-linear"),Pe(t,"width",l[4]+"%"),i(n,"class","progressBar w-full h-6"),i(c,"class","flex-none aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 text-3xl hover:bg-rose-600 hover:text-zinc-900"),i(a,"href","./"),i(a,"title","Back to setup"),i(a,"class","flex-none"),i(W,"class","w-full sm:text-3xl xl:text-4xl text-rose-500 text-center"),C.disabled=F=l[2]<0,i(C,"class","aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 hover:bg-rose-600 hover:text-zinc-900 disabled:bg-stone-400 disabled:hover:text-zinc-800"),i(H,"class","flex-none"),i(s,"class","h-32 flex flex-row justify-between items-center p-8"),i(T,"class","sm:text-4xl xl:text-6xl text-center space-y-3"),i(G,"class","flex-grow flex justify-center items-center text-rose-500"),i(E,"id","wa-track"),i(E,"cx",l[11]),i(E,"cy",l[11]),i(E,"r",l[12]),i(E,"fill","none"),i(E,"class","stroke-current fill-transparent"),i(E,"stroke-width",_t),w(E,"text-lime-500",l[1]==="rest"),w(E,"text-rose-500",l[1]==="exercise"),i($,"id","wa-indicator"),i($,"cx",l[11]),i($,"cy",l[11]),i($,"r",l[12]),i($,"fill","none"),i($,"class","stroke-current fill-transparent -rotate-90 origin-center"),i($,"stroke-width",Ue),i($,"stroke-linecap","round"),i($,"stroke-dasharray",l[13]),i($,"stroke-dashoffset",l[14]),w($,"text-rose-500",l[1]==="rest"),w($,"text-lime-500",l[1]==="exercise"),i(y,"id","wa-inner-ping"),i(y,"cx",l[11]),i(y,"cy",l[11]),i(y,"r",l[12]-8),i(y,"class","transform origin-center svelte-hm7ggd"),w(y,"fill-rose-500",l[1]==="rest"),w(y,"fill-lime-500",l[1]==="exercise"),w(y,"wa-animate-ping",l[0]<=3e3),i(q,"id","wa-inner"),i(q,"class","fill-zinc-800"),i(q,"cx",l[11]),i(q,"cy",l[11]),i(q,"r",l[12]-7),i(I,"class","z-30 w-auto h-full"),i(I,"width",me),i(I,"height",me),i(I,"viewBox",`0 0 ${me} ${me}`),i(I,"xmlns","http://www.w3.org/2000/svg"),i(k,"class","text-center sm:text-4xl xl:text-8xl"),w(k,"text-rose-500",l[1]==="rest"),w(k,"text-lime-500",l[1]==="exercise"),i(J,"class","z-40 absolute flex justify-center items-center aspect-square top-1/2 start-1/2 transform -translate-y-1/2 -translate-x-1/2 rounded-full"),i(M,"class","relative h-full flex justify-center items-stretch"),i(z,"class","p-8 h-[calc(100lvh-9.5rem)] flex landscape:flex-row portrait:flex-col justify-stretch items-stretch gap-8"),i(e,"class","min-w-96 w-lvw bg-zinc-800")},m(f,_){Q(f,e,_),d(e,n),d(n,t),d(e,r),d(e,s),d(s,a),d(a,c),ee(o,c,null),d(s,m),d(s,W),ee(L,W,null),d(s,re),d(s,H),d(H,C),V[v].m(C,null),d(e,O),d(e,z),d(z,G),d(G,T),P.m(T,null),d(z,le),d(z,M),d(M,I),d(I,E),d(I,$),d(I,y),d(I,q),d(M,se),d(M,J),d(J,k),ee(S,k,null),D=!0,h||(j=[Fe(c,"click",l[15]),Fe(C,"click",l[16])],h=!0)},p(f,[_]){(!D||_&16)&&Pe(t,"width",f[4]+"%");const ae={};_&4&&(ae.timeInMs=f[2]),L.$set(ae);let U=v;v=he(f),v!==U&&(Xe(),B(V[U],1,1,()=>{V[U]=null}),Re(),p=V[v],p||(p=V[v]=A[v](f),p.c()),N(p,1),p.m(C,null)),(!D||_&4&&F!==(F=f[2]<0))&&(C.disabled=F),_e===(_e=Ne(f))&&P?P.p(f,_):(P.d(1),P=_e(f),P&&(P.c(),P.m(T,null))),(!D||_&2)&&w(E,"text-lime-500",f[1]==="rest"),(!D||_&2)&&w(E,"text-rose-500",f[1]==="exercise"),(!D||_&2)&&w($,"text-rose-500",f[1]==="rest"),(!D||_&2)&&w($,"text-lime-500",f[1]==="exercise"),(!D||_&2)&&w(y,"fill-rose-500",f[1]==="rest"),(!D||_&2)&&w(y,"fill-lime-500",f[1]==="exercise"),(!D||_&1)&&w(y,"wa-animate-ping",f[0]<=3e3);const ie={};_&1&&(ie.timeInMs=f[0]),S.$set(ie),(!D||_&2)&&w(k,"text-rose-500",f[1]==="rest"),(!D||_&2)&&w(k,"text-lime-500",f[1]==="exercise")},i(f){D||(N(o.$$.fragment,f),N(L.$$.fragment,f),N(p),N(S.$$.fragment,f),D=!0)},o(f){B(o.$$.fragment,f),B(L.$$.fragment,f),B(p),B(S.$$.fragment,f),D=!1},d(f){f&&u(e),te(o),te(L),V[v].d(),P.d(),te(S),h=!1,We(j)}}}const me=128,_t=3,Ue=3;function pt(l,e,n){let t,r,s,a,c,o,m;const W=ue("selectedExercises");de(l,W,h=>n(24,m=h));const L=ue("exerciseLength");de(l,L,h=>n(20,s=h));const re=ue("restLength");de(l,re,h=>n(21,a=h));const H=ue("repetitions");de(l,H,h=>n(23,o=h));const C=ue("setOrCycle");de(l,C,h=>n(22,c=h));let v=m||[];if(o>1){const h=Array(o).fill("");c==="set"?v=v.flatMap(j=>h.map(()=>j)):c==="cycle"&&(v=h.flatMap(()=>[...v]))}let p=a,F=!1,O="rest",z=0;const G=(s+a)*v.length;let T=G;const le=me/2,M=le-Ue,I=2*Math.PI*M;let E=I;const $=[{strokeDashoffset:I},{strokeDashoffset:0}],y={id:"restA",duration:a},q={id:"exerciseA",duration:s},se=(h=1240,j=.2)=>{{const A=new AudioContext,V=A.createOscillator();V.frequency.value=h,V.connect(A.destination),V.start(),V.stop(A.currentTime+j)}},J=()=>{if(F||!t){clearInterval(k);return}if(p<=3e3&&p%1e3===0&&(p<1e3?se(540,.5):se()),p<=0){if(clearInterval(k),O==="exercise"&&z===v.length-1)return;O==="rest"?(n(1,O="exercise"),n(0,p=s)):(n(1,O="rest"),n(0,p=a),n(18,z++,z)),k=setInterval(J,100)}O==="exercise"&&t&&p===s/2&&se(850,.3),n(0,p=p-100),n(2,T=T-100)};let k=setInterval(J,100);v.length===0&&(clearInterval(k),Ge("./"));const S=()=>{clearInterval(k),Ge("./")},D=()=>{F?k=setInterval(J,100):clearInterval(k),n(3,F=!F)};return l.$$.update=()=>{if(l.$$.dirty&3){navigator.wakeLock!==void 0&&navigator.wakeLock.request("screen").then(he=>{setTimeout(()=>he.release(),G)});const h=document.getElementById("wa-indicator");let j=h==null?void 0:h.animate($,y),A=h==null?void 0:h.animate($,q);j==null||j.cancel(),A==null||A.cancel();let V=j;V=O==="rest"?j:A,V&&(V.currentTime=p)}l.$$.dirty&393216&&n(5,t=v[z||0]),l.$$.dirty&4&&n(4,r=(T-1e3)/G*100)},[p,O,T,F,r,t,W,L,re,H,C,le,M,I,E,S,D,v,z]}class xt extends xe{constructor(e){super(),ke(this,e,pt,ht,be,{})}}export{xt as component};

import{s as he,E as J,F as te,w as ve,A as $e,B as be,C as ke,e as $,a as U,G as ae,c as b,b as p,f as d,g as W,H as ie,p as i,q as Oe,I as w,i as H,h as m,J as qe,K as We,L as Pe,k as Se,y as Je,n as He,t as de,d as me,j as xe}from"../chunks/scheduler.ClHMspdm.js";import{S as _e,i as ge,b as K,d as R,m as X,a as B,t as T,e as Q,c as Ke,g as Re}from"../chunks/index.CGLs4aJm.js";import{g as Fe}from"../chunks/entry.CVAfjaxP.js";import{I as we,g as Ie,a as Ee,F as Ge}from"../chunks/FormattedTime.C9vSpgY1.js";function Xe(l){let e;const n=l[2].default,t=ve(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$e(t,n,r,r[3],e?ke(n,r[3],s,null):be(r[3]),null)},i(r){e||(B(t,r),e=!0)},o(r){T(t,r),e=!1},d(r){t&&t.d(r)}}}function Qe(l){let e,n;const t=[{name:"pause"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[Xe]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=J(r,t[s]);return e=new we({props:r}),{c(){K(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,[a]){const c=a&3?Ie(t,[t[0],a&2&&Ee(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function Ye(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return l.$$set=a=>{n(1,e=J(J({},e),te(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=te(e),[s,e,t,r]}class Ze extends _e{constructor(e){super(),ge(this,e,Ye,Qe,he,{})}}function et(l){let e;const n=l[2].default,t=ve(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$e(t,n,r,r[3],e?ke(n,r[3],s,null):be(r[3]),null)},i(r){e||(B(t,r),e=!0)},o(r){T(t,r),e=!1},d(r){t&&t.d(r)}}}function tt(l){let e,n;const t=[{name:"play"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[et]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=J(r,t[s]);return e=new we({props:r}),{c(){K(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,[a]){const c=a&3?Ie(t,[t[0],a&2&&Ee(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function st(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return l.$$set=a=>{n(1,e=J(J({},e),te(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=te(e),[s,e,t,r]}class rt extends _e{constructor(e){super(),ge(this,e,st,tt,he,{})}}function lt(l){let e;const n=l[2].default,t=ve(n,l,l[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$e(t,n,r,r[3],e?ke(n,r[3],s,null):be(r[3]),null)},i(r){e||(B(t,r),e=!0)},o(r){T(t,r),e=!1},d(r){t&&t.d(r)}}}function nt(l){let e,n;const t=[{name:"x"},l[1],{iconNode:l[0]}];let r={$$slots:{default:[lt]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)r=J(r,t[s]);return e=new we({props:r}),{c(){K(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,[a]){const c=a&3?Ie(t,[t[0],a&2&&Ee(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function at(l,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return l.$$set=a=>{n(1,e=J(J({},e),te(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=te(e),[s,e,t,r]}class it extends _e{constructor(e){super(),ge(this,e,at,nt,he,{})}}function ot(l){let e,n;return e=new Ze({props:{size:"40"}}),{c(){K(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){X(e,t,r),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ct(l){let e,n;return e=new rt({props:{size:"40"}}),{c(){K(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){X(e,t,r),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ft(l){let e,n="Done! Good Job!";return{c(){e=$("div"),e.textContent=n,this.h()},l(t){e=b(t,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1i33vmi"&&(e.textContent=n),this.h()},h(){i(e,"class","text-lime-500")},m(t,r){H(t,e,r)},p:He,d(t){t&&d(e)}}}function ut(l){let e,n,t=l[5].description+"",r;function s(o,u){return o[1]==="rest"?mt:dt}let a=s(l),c=a(l);return{c(){c.c(),e=U(),n=$("div"),r=de(t),this.h()},l(o){c.l(o),e=W(o),n=b(o,"DIV",{class:!0});var u=p(n);r=me(u,t),u.forEach(d),this.h()},h(){i(n,"class","text-lg xl:text-2xl text-stone-50")},m(o,u){c.m(o,u),H(o,e,u),H(o,n,u),m(n,r)},p(o,u){a===(a=s(o))&&c?c.p(o,u):(c.d(1),c=a(o),c&&(c.c(),c.m(e.parentNode,e))),u&32&&t!==(t=o[5].description+"")&&xe(r,t)},d(o){o&&(d(e),d(n)),c.d(o)}}}function dt(l){let e,n=l[5].name+"",t;return{c(){e=$("div"),t=de(n),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=p(e);t=me(s,n),s.forEach(d),this.h()},h(){i(e,"class","text-lime-500")},m(r,s){H(r,e,s),m(e,t)},p(r,s){s&32&&n!==(n=r[5].name+"")&&xe(t,n)},d(r){r&&d(e)}}}function mt(l){let e,n="Rest",t,r,s,a=l[5].name+"",c;return{c(){e=$("div"),e.textContent=n,t=U(),r=$("div"),s=de("Next: "),c=de(a),this.h()},l(o){e=b(o,"DIV",{"data-svelte-h":!0}),Je(e)!=="svelte-lcrvs2"&&(e.textContent=n),t=W(o),r=b(o,"DIV",{class:!0});var u=p(r);s=me(u,"Next: "),c=me(u,a),u.forEach(d),this.h()},h(){i(r,"class","text-3xl xl:text-4xl")},m(o,u){H(o,e,u),H(o,t,u),H(o,r,u),m(r,s),m(r,c)},p(o,u){u&32&&a!==(a=o[5].name+"")&&xe(c,a)},d(o){o&&(d(e),d(t),d(r))}}}function ht(l){let e,n,t,r,s,a,c,o,u,x,z,M,j,C,y,N,Y,Z,q,F,G,se,A,I,g,v,E,h,L,D,k,P,V,pe,ye;o=new it({props:{size:"40"}}),z=new Ge({props:{timeInMs:l[2]}});const De=[ct,ot],ee=[];function Ve(f,_){return f[3]?0:1}y=Ve(l),N=ee[y]=De[y](l);function ze(f,_){return f[2]>0?ut:ft}let ce=ze(l),O=ce(l);return P=new Ge({props:{timeInMs:l[0]}}),{c(){e=$("div"),n=$("div"),t=$("div"),r=U(),s=$("div"),a=$("a"),c=$("button"),K(o.$$.fragment),u=U(),x=$("div"),K(z.$$.fragment),M=U(),j=$("div"),C=$("button"),N.c(),Z=U(),q=$("div"),F=$("div"),G=$("div"),O.c(),se=U(),A=$("div"),I=ae("svg"),g=ae("circle"),v=ae("circle"),E=ae("circle"),h=ae("circle"),L=U(),D=$("div"),k=$("div"),K(P.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0});var _=p(e);n=b(_,"DIV",{class:!0});var re=p(n);t=b(re,"DIV",{class:!0,style:!0}),p(t).forEach(d),re.forEach(d),r=W(_),s=b(_,"DIV",{class:!0});var S=p(s);a=b(S,"A",{href:!0,title:!0,class:!0});var le=p(a);c=b(le,"BUTTON",{class:!0});var Ce=p(c);R(o.$$.fragment,Ce),Ce.forEach(d),le.forEach(d),u=W(S),x=b(S,"DIV",{class:!0});var Ne=p(x);R(z.$$.fragment,Ne),Ne.forEach(d),M=W(S),j=b(S,"DIV",{class:!0});var Le=p(j);C=b(Le,"BUTTON",{class:!0});var Be=p(C);N.l(Be),Be.forEach(d),Le.forEach(d),S.forEach(d),Z=W(_),q=b(_,"DIV",{class:!0});var fe=p(q);F=b(fe,"DIV",{class:!0});var Te=p(F);G=b(Te,"DIV",{class:!0});var je=p(G);O.l(je),je.forEach(d),Te.forEach(d),se=W(fe),A=b(fe,"DIV",{class:!0});var ue=p(A);I=ie(ue,"svg",{class:!0,width:!0,height:!0,viewBox:!0,xmlns:!0});var ne=p(I);g=ie(ne,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0}),p(g).forEach(d),v=ie(ne,"circle",{id:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),p(v).forEach(d),E=ie(ne,"circle",{id:!0,cx:!0,cy:!0,r:!0,class:!0}),p(E).forEach(d),h=ie(ne,"circle",{id:!0,class:!0,cx:!0,cy:!0,r:!0}),p(h).forEach(d),ne.forEach(d),L=W(ue),D=b(ue,"DIV",{class:!0});var Ae=p(D);k=b(Ae,"DIV",{class:!0});var Me=p(k);R(P.$$.fragment,Me),Me.forEach(d),Ae.forEach(d),ue.forEach(d),fe.forEach(d),_.forEach(d),this.h()},h(){i(t,"class","h-full bg-rose-500 transition-all duration-1000 ease-linear"),Oe(t,"width",l[4]+"%"),i(n,"class","progressBar w-full h-6"),i(c,"class","flex-none aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 text-3xl hover:bg-rose-600 hover:text-zinc-900"),i(a,"href","./"),i(a,"title","Back to setup"),i(a,"class","flex-none"),i(x,"class","w-full text-3xl xl:text-4xl text-rose-500 text-center"),C.disabled=Y=l[2]<0,i(C,"class","aspect-square h-20 flex justify-center items-center p-4 bg-rose-500 rounded-md text-zinc-800 hover:bg-rose-600 hover:text-zinc-900 disabled:bg-stone-400 disabled:hover:text-zinc-800"),i(j,"class","flex-none"),i(s,"class","h-32 flex flex-row justify-between items-center p-8"),i(G,"class","text-4xl xl:text-6xl text-center space-y-3"),i(F,"class","flex-grow flex justify-center items-center text-rose-500"),i(g,"id","wa-track"),i(g,"cx",l[8]),i(g,"cy",l[8]),i(g,"r",l[9]),i(g,"fill","none"),i(g,"class","stroke-current fill-transparent"),i(g,"stroke-width",_t),w(g,"text-lime-500",l[1]==="rest"),w(g,"text-rose-500",l[1]==="exercise"),i(v,"id","wa-indicator"),i(v,"cx",l[8]),i(v,"cy",l[8]),i(v,"r",l[9]),i(v,"fill","none"),i(v,"class","stroke-current fill-transparent -rotate-90 origin-center"),i(v,"stroke-width",Ue),i(v,"stroke-linecap","round"),i(v,"stroke-dasharray",l[10]),i(v,"stroke-dashoffset",l[11]),w(v,"text-rose-500",l[1]==="rest"),w(v,"text-lime-500",l[1]==="exercise"),i(E,"id","wa-inner-ping"),i(E,"cx",l[8]),i(E,"cy",l[8]),i(E,"r",l[9]-8),i(E,"class","transform origin-center svelte-hm7ggd"),w(E,"fill-rose-500",l[1]==="rest"),w(E,"fill-lime-500",l[1]==="exercise"),w(E,"wa-animate-ping",l[0]<=3e3),i(h,"id","wa-inner"),i(h,"class","fill-zinc-800"),i(h,"cx",l[8]),i(h,"cy",l[8]),i(h,"r",l[9]-7),i(I,"class","z-30 w-auto h-full"),i(I,"width",oe),i(I,"height",oe),i(I,"viewBox",`0 0 ${oe} ${oe}`),i(I,"xmlns","http://www.w3.org/2000/svg"),i(k,"class","text-center text-4xl xl:text-8xl"),w(k,"text-rose-500",l[1]==="rest"),w(k,"text-lime-500",l[1]==="exercise"),i(D,"class","z-40 absolute flex justify-center items-center aspect-square top-1/2 start-1/2 transform -translate-y-1/2 -translate-x-1/2 rounded-full"),i(A,"class","relative h-full flex justify-center items-stretch"),i(q,"class","p-8 h-[calc(100lvh-9.5rem)] flex landscape:flex-row portrait:flex-col justify-stretch items-stretch gap-8"),i(e,"class","min-w-96 w-lvw bg-zinc-800")},m(f,_){H(f,e,_),m(e,n),m(n,t),m(e,r),m(e,s),m(s,a),m(a,c),X(o,c,null),m(s,u),m(s,x),X(z,x,null),m(s,M),m(s,j),m(j,C),ee[y].m(C,null),m(e,Z),m(e,q),m(q,F),m(F,G),O.m(G,null),m(q,se),m(q,A),m(A,I),m(I,g),m(I,v),m(I,E),m(I,h),m(A,L),m(A,D),m(D,k),X(P,k,null),V=!0,pe||(ye=[qe(c,"click",l[12]),qe(C,"click",l[13])],pe=!0)},p(f,[_]){(!V||_&16)&&Oe(t,"width",f[4]+"%");const re={};_&4&&(re.timeInMs=f[2]),z.$set(re);let S=y;y=Ve(f),y!==S&&(Re(),T(ee[S],1,1,()=>{ee[S]=null}),Ke(),N=ee[y],N||(N=ee[y]=De[y](f),N.c()),B(N,1),N.m(C,null)),(!V||_&4&&Y!==(Y=f[2]<0))&&(C.disabled=Y),ce===(ce=ze(f))&&O?O.p(f,_):(O.d(1),O=ce(f),O&&(O.c(),O.m(G,null))),(!V||_&2)&&w(g,"text-lime-500",f[1]==="rest"),(!V||_&2)&&w(g,"text-rose-500",f[1]==="exercise"),(!V||_&2)&&w(v,"text-rose-500",f[1]==="rest"),(!V||_&2)&&w(v,"text-lime-500",f[1]==="exercise"),(!V||_&2)&&w(E,"fill-rose-500",f[1]==="rest"),(!V||_&2)&&w(E,"fill-lime-500",f[1]==="exercise"),(!V||_&1)&&w(E,"wa-animate-ping",f[0]<=3e3);const le={};_&1&&(le.timeInMs=f[0]),P.$set(le),(!V||_&2)&&w(k,"text-rose-500",f[1]==="rest"),(!V||_&2)&&w(k,"text-lime-500",f[1]==="exercise")},i(f){V||(B(o.$$.fragment,f),B(z.$$.fragment,f),B(N),B(P.$$.fragment,f),V=!0)},o(f){T(o.$$.fragment,f),T(z.$$.fragment,f),T(N),T(P.$$.fragment,f),V=!1},d(f){f&&d(e),Q(o),Q(z),ee[y].d(),O.d(),Q(P),pe=!1,We(ye)}}}const oe=128,_t=3,Ue=3;function gt(l,e,n){let t,r,s,a;const c=Pe("selectedExercises");Se(l,c,h=>n(18,a=h));const o=Pe("workoutSettings");Se(l,o,h=>n(17,s=h));let u=a||[];if(s.repetitions>1){const h=Array(s.repetitions).fill("");s.setOrCycle==="set"?u=u.flatMap(L=>h.map(()=>L)):s.setOrCycle==="cycle"&&(u=h.flatMap(()=>[...u]))}let x=s.restLength,z=!1,M="rest",j=0;const C=(s.exerciseLength+s.restLength)*u.length;let y=C;const N=oe/2,Y=N-Ue,Z=2*Math.PI*Y;let q=Z;const F=[{strokeDashoffset:Z},{strokeDashoffset:0}],G={id:"restA",duration:s.restLength},se={id:"exerciseA",duration:s.exerciseLength},A=(h=1240,L=.2)=>{{const D=new AudioContext,k=D.createOscillator();k.frequency.value=h,k.connect(D.destination),k.start(),k.stop(D.currentTime+L)}},I=()=>{if(z||!t){clearInterval(g);return}if(x<=3e3&&x%1e3===0&&(x<1e3?A(540,.5):A()),x<=0){if(clearInterval(g),M==="exercise"&&j===u.length-1)return;M==="rest"?(n(1,M="exercise"),n(0,x=s.exerciseLength)):(n(1,M="rest"),n(0,x=s.restLength),n(15,j++,j)),g=setInterval(I,100)}M==="exercise"&&t&&x===s.exerciseLength/2&&A(850,.3),n(0,x=x-100),n(2,y=y-100)};let g=setInterval(I,100);u.length===0&&(clearInterval(g),Fe("./"));const v=()=>{clearInterval(g),Fe("./")},E=()=>{z?g=setInterval(I,100):clearInterval(g),n(3,z=!z)};return l.$$.update=()=>{if(l.$$.dirty&3){navigator.wakeLock!==void 0&&navigator.wakeLock.request("screen").then(P=>{setTimeout(()=>P.release(),C)});const h=document.getElementById("wa-indicator");let L=h==null?void 0:h.animate(F,G),D=h==null?void 0:h.animate(F,se);L==null||L.cancel(),D==null||D.cancel();let k=L;k=M==="rest"?L:D,k&&(k.currentTime=x)}l.$$.dirty&49152&&n(5,t=u[j||0]),l.$$.dirty&4&&n(4,r=(y-1e3)/C*100)},[x,M,y,z,r,t,c,o,N,Y,Z,q,v,E,u,j]}class kt extends _e{constructor(e){super(),ge(this,e,gt,ht,he,{})}}export{kt as component};
